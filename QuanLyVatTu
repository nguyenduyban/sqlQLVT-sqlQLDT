--CAU 1

CREATE TABLE LOAIVATU(
Maloai nchar(5),
TenLoai nvarchar(50),
Mota nvarchar(200),
PRIMARY KEY (Maloai)
)
-- CAU 2
ALTER TABLE VATTU ADD CONSTRAINT FK_LOAIVATTU
FOREIGN KEY (MALOAI) REFERENCES LOAIVATTU (MALOAI)


--CAU 3

ALTER TABLE DONHANG ADD CONSTRAINT CHECK1
CHECK(DAY(NGAYDATHANG)<=DAY(GETDATE()))

--CAU 4
INSERT INTO PHIEUNHAP(MAPN,MAVT,SOLUONG)
VALUES('N05','V07','1000')
ALTER TABLE PHIEUNHAP ADD CONSTRAINT FK_MAVATTU
FOREIGN KEY (MAVT) REFERENCES VATTU (MAVT)
INSERT INTO DONGIAMUA
SELECT *DONGIA
FROM PHIEUNHAP PN JOIN VATTU VT ON PN.MAVT=VT.MAVT
WHERE DONGIA = 1/2

-- CAU 5 
SELECT *
FROM VATTU
WHERE DONGIA = (SELECT MAX(DONGIA) FROM VATTU);

--CAU 6
SELECT MAPM,MAVT,TENVT,TENVT,SOLUONG,DONGIAMUA
FROM VATU VT JOIN CHITIETNHAPHANG CT ON VT.MAVT=CT.MAVT
WHERE TENVT = N'ฤรก Mi%'

